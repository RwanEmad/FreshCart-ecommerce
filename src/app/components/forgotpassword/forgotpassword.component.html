<section>
    <h1 class="text-center text-main my-2">Forgot Password</h1>
   @if (step==1) {
    <form [formGroup]="verifyEmail" (ngSubmit)="verifyEmailSubmit()" class="bg-main-light rounded-4 shadow p-3">
        <div class="my-2">
            <label for="email">email</label>
            <input [ngClass]="{
                'is-invalid':verifyEmail.get('email')?.errors && (verifyEmail.get('email')?.touched || verifyEmail.get('email')?.dirty),
                'is-valid':!verifyEmail.get('email')?.errors && (verifyEmail.get('email')?.touched || verifyEmail.get('email')?.dirty),
                }" type="email" name="email" class="form-control" formControlName="email" >
                @if (verifyEmail.get('email')?.errors && (verifyEmail.get('email')?.touched || verifyEmail.get('email')?.dirty))
                {
                     <div class="alert alert-danger w-50">
                        @if (verifyEmail.get('email')?.getError('required'))
                         {
                            <p class="m-0">Email required</p>

                        } @else if (verifyEmail.get('email')?.getError('email'))
                        {
                            <p class="m-0">Enter Valid Email .</p>

                       }
                       
                    </div>

                }
        </div>
        <button [disabled]="verifyEmail.invalid || isLoading" type="submit" class="btn-main ms-auto d-block">Verify Email
            @if (isLoading) {
                <span><i class="fas fa-spin fa-spinner"></i></span>
            }
        </button>
    </form>

   }@else if (step==2) {
    <form [formGroup]="verifyCode" (ngSubmit)="verifyCodeSubmit()" class="bg-main-light rounded-4 shadow p-3 my-5">
        <div class="my-2">
            <label for="code">Reset Code</label>
            <input [ngClass]="{
                'is-invalid':verifyCode.get('resetCode')?.errors && (verifyCode.get('resetCode')?.touched || verifyCode.get('resetCode')?.dirty),
                'is-valid':!verifyCode.get('resetCode')?.errors && (verifyCode.get('resetCode')?.touched || verifyCode.get('resetCode')?.dirty),
                }" type="text" name="resetCode" class="form-control" formControlName="resetCode" >
                @if (verifyCode.get('resetCode')?.errors && (verifyCode.get('resetCode')?.touched || verifyCode.get('resetCode')?.dirty))
                {
                     <div class="alert alert-danger w-50">
                        @if (verifyCode.get('resetCode')?.getError('required'))
                         {
                            <p class="m-0">code required</p>

                        } @else if (verifyCode.get('resetCode')?.getError('pattern'))
                        {
                            <p class="m-0">Enter Valid Code .</p>
                       }
                       
                    </div>

                }
        </div>
        <button [disabled]="verifyCode.invalid || isLoading" type="submit" class="btn-main ms-auto d-block">Verify Code
            @if (isLoading) {
                <span><i class="fas fa-spin fa-spinner"></i></span>
            }
        </button>
    </form>

   }@else if (step==3) {
    <form [formGroup]="resetPassword" (ngSubmit)="resetPasswordSubmit()" class="bg-main-light rounded-4 shadow p-3">
        <div class="my-2">
            <label for="email">email</label>
            <input readonly [ngClass]="{
                'is-invalid':resetPassword.get('email')?.errors && (resetPassword.get('email')?.touched || resetPassword.get('email')?.dirty),
                'is-valid':!resetPassword.get('email')?.errors && (resetPassword.get('email')?.touched || resetPassword.get('email')?.dirty),
                }" type="email" name="email" class="form-control" formControlName="email" >
                @if (resetPassword.get('email')?.errors && (resetPassword.get('email')?.touched || resetPassword.get('email')?.dirty))
                {
                     <div class="alert alert-danger w-50">
                        @if (resetPassword.get('email')?.getError('required'))
                         {
                            <p class="m-0">Email required</p>

                        } @else if (resetPassword.get('email')?.getError('email'))
                        {
                            <p class="m-0">Enter Valid Email .</p>

                       }
                       
                    </div>

                }
        </div>
      
        <div class="my-2">
            <label for="newPassword">New Password</label>
            <input [ngClass]="{
                'is-invalid':resetPassword.get('newPassword')?.errors && (resetPassword.get('newPassword')?.touched || resetPassword.get('newPassword')?.dirty),
                'is-valid':!resetPassword.get('newPassword')?.errors && (resetPassword.get('newPassword')?.touched || resetPassword.get('newPassword')?.dirty),

            }" type="password" name="password" class="form-control" formControlName="newPassword" >

           
                
                @if (resetPassword.get('newPassword')?.errors && (resetPassword.get('newPassword')?.touched || resetPassword.get('newPassword')?.dirty))
                {
                     <div class="alert alert-danger w-50">
                        @if (resetPassword.get('newPassword')?.getError('required'))
                         {
                            <p class="m-0">Password required</p>

                        } @else if (resetPassword.get('newPassword')?.getError('pattern'))
                        {
                            <p class="m-0">must be at least 6 chars .</p>

                       }
                       
                    </div>

                }
        </div>

        <button [disabled]="resetPassword.invalid || isLoading" type="submit" class="btn-main ms-auto d-block">reset  password

            @if (isLoading) {
                <span><i class="fas fa-spin fa-spinner"></i></span>
            }
        </button>
    </form>

   }
    
  

</section>