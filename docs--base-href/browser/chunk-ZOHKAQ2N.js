import{a as $}from"./chunk-56BKJWAR.js";import"./chunk-SLOTEUL6.js";import{j as V,y as F}from"./chunk-G7LECXLU.js";import{Ab as m,Hb as s,Ib as b,Jb as h,Kb as E,Na as k,Pb as T,Ra as l,Rb as I,Vb as S,Xb as g,aa as w,da as P,gb as C,ib as x,mb as f,na as d,oa as p,ob as y,pb as D,qb as a,rb as o,sb as u,vb as v,zb as _}from"./chunk-A5RDGCAA.js";var B=(i,r)=>r.product.id,O=i=>["/orders",i];function R(i,r){if(i&1&&(a(0,"p",4),s(1),S(2,"currency"),o()),i&2){let e=m(2);l(),E("Total Cart Price : ",g(2,2,e.cartDetails.data.totalCartPrice,"GBP")," ",e.totalPrice,"")}}function j(i,r){if(i&1&&(a(0,"p",4),s(1),S(2,"currency"),o()),i&2){let e=m(2);l(),h("Total Cart Price : ",g(2,1,e.totalPrice,"GBP")," ")}}function L(i,r){if(i&1){let e=v();a(0,"div",5)(1,"div",7)(2,"div"),u(3,"img",8),o()(),a(4,"div",9)(5,"div")(6,"h3",10),s(7),o(),a(8,"p",11),s(9),o(),a(10,"span",12),_("click",function(){let t=d(e).$implicit,c=m(2);return p(c.removeItem(t.product.id))}),u(11,"i",13),s(12," Remove"),o()(),a(13,"div",14)(14,"span",15),_("click",function(){let t=d(e).$implicit,c=m(2);return p(c.updateCount(t.product.id,t.count+1))}),u(15,"i",16),o(),a(16,"span",17),s(17),o(),a(18,"span",15),_("click",function(){let t=d(e).$implicit,c=m(2);return p(c.updateCount(t.product.id,t.count-1))}),u(19,"i",18),o()()()()}if(i&2){let e=r.$implicit;l(3),x("src",e.product.imageCover,k)("alt",e.product.title),l(4),b(e.product.title),l(2),h("Price : ",e.price,""),l(8),b(e.count)}}function q(i,r){if(i&1){let e=v();a(0,"section",0)(1,"div",1)(2,"h1",2),s(3,"Shop Cart:"),o(),a(4,"button",3),_("click",function(){d(e);let t=m();return p(t.RemoveCart())}),s(5,"Clear Cart"),o()(),C(6,R,3,5,"p",4)(7,j,3,4),y(8,L,20,5,"div",5,B),a(10,"button",6),s(11,"Orders"),o()()}if(i&2){let e=m();l(6),f(6,e.cartDetails.data.totalCartPrice?6:7),l(2),D(e.cartDetails.data.products),l(2),x("routerLink",I(2,O,e.cartDetails.data._id))}}var A=(()=>{let r=class r{constructor(){this._CartService=w($),this.cartDetails=null,this.totalPrice=0}ngOnInit(){this.getCartProSub=this._CartService.getProductsCart().subscribe({next:n=>{console.log(n),this.cartDetails=n}})}removeItem(n){this._CartService.deleteSpecificCartItem(n).subscribe({next:t=>{console.log(t),this.cartDetails=t,this._CartService.cartNumber.next(t.numOfCartItems)}})}updateCount(n,t){t>0&&this._CartService.updateProductQuantity(n,t).subscribe({next:c=>{console.log(c),this.cartDetails=c}})}RemoveCart(){this._CartService.clearCart().subscribe({next:n=>{n.message=="success"&&(console.log(n),this.cartDetails={data:{totalCartPrice:0}},this._CartService.cartNumber.next(0))}})}ngOnDestroy(){this.getCartProSub?.unsubscribe()}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=P({type:r,selectors:[["app-cart"]],standalone:!0,features:[T],decls:1,vars:1,consts:[[1,"bg-main-light","rounded-4","shadow","p-4","my-2","w-75","mx-auto","my-5"],[1,"d-flex","justify-content-between","align-items-center"],[1,"h2"],[1,"btn","btn-outline-danger","btn-small",3,"click"],[1,"text-main"],[1,"row","mb-1","border-bottom","py-2"],[1,"btn-main","mt-2",3,"routerLink"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11","d-flex","align-items-center","justify-content-between"],[1,"h5"],[1,"text-main","m-0"],[1,"text-danger","cr",3,"click"],[1,"fa-solid","fa-trash"],[1,"d-flex","align-items-center","gap-2"],[1,"text-main","cr",3,"click"],[1,"fa-solid","fa-square-plus","fa-2xl"],[1,""],[1,"fa-solid","fa-square-minus","fa-2xl"]],template:function(t,c){t&1&&C(0,q,12,4,"section",0),t&2&&f(0,c.cartDetails?0:-1)},dependencies:[V,F]});let i=r;return i})();export{A as CartComponent};
