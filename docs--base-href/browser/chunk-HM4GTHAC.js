import{b as W}from"./chunk-AKL7RE4X.js";import{a as V,b as f,c as B,d as M,f as k,g as I,h as $,i as j,k as O}from"./chunk-3RAAWP2B.js";import"./chunk-SLOTEUL6.js";import{c as D,x as G}from"./chunk-G7LECXLU.js";import{Ab as C,Hb as a,Ib as x,Jb as L,Pb as A,Ra as s,Sb as b,aa as q,da as P,gb as p,ib as h,mb as _,qb as l,rb as r,sb as F,zb as N}from"./chunk-A5RDGCAA.js";var R=(t,o)=>({"is-valid":t,"is-invalid":o});function z(t,o){t&1&&(l(0,"p",17),a(1,"name required ."),r())}function H(t,o){t&1&&(l(0,"p",17),a(1,"Name Should be more than or equal 3 chars ."),r())}function J(t,o){t&1&&(l(0,"p",17),a(1,"Name Should be less than or equal 20 chars ."),r())}function K(t,o){if(t&1&&(l(0,"div",6),p(1,z,2,0,"p",17)(2,H,2,0)(3,J,2,0),r()),t&2){let i,n=C();s(),_(1,(i=n.registerForm.get("name"))!=null&&i.getError("required")?1:(i=n.registerForm.get("name"))!=null&&i.getError("minlength")?2:(i=n.registerForm.get("name"))!=null&&i.getError("maxlength")?3:-1)}}function Q(t,o){t&1&&(l(0,"p",17),a(1,"Email required"),r())}function U(t,o){t&1&&(l(0,"p",17),a(1,"Enter Valid Email ."),r())}function X(t,o){if(t&1&&(l(0,"div",6),p(1,Q,2,0,"p",17)(2,U,2,0),r()),t&2){let i,n=C();s(),_(1,(i=n.registerForm.get("email"))!=null&&i.getError("required")?1:(i=n.registerForm.get("email"))!=null&&i.getError("email")?2:-1)}}function Y(t,o){t&1&&(l(0,"p",17),a(1,"Phone required"),r())}function Z(t,o){t&1&&(l(0,"p",17),a(1,"accept only egypt phone numbers ."),r())}function ee(t,o){if(t&1&&(l(0,"div",6),p(1,Y,2,0,"p",17)(2,Z,2,0),r()),t&2){let i,n=C();s(),_(1,(i=n.registerForm.get("phone"))!=null&&i.getError("required")?1:(i=n.registerForm.get("phone"))!=null&&i.getError("pattern")?2:-1)}}function te(t,o){t&1&&(l(0,"p",17),a(1,"Password required"),r())}function re(t,o){t&1&&(l(0,"p",17),a(1,"must be at least 6 chars ."),r())}function ie(t,o){if(t&1&&(l(0,"div",6),p(1,te,2,0,"p",17)(2,re,2,0),r()),t&2){let i,n=C();s(),_(1,(i=n.registerForm.get("password"))!=null&&i.getError("required")?1:(i=n.registerForm.get("password"))!=null&&i.getError("pattern")?2:-1)}}function ne(t,o){t&1&&(l(0,"p",15),a(1,"Password confirmation is incorrect"),r())}function le(t,o){t&1&&(l(0,"span"),F(1,"i",18),r())}function oe(t,o){if(t&1&&(l(0,"p",15),a(1),r()),t&2){let i=C();s(),x(i.msgError)}}function se(t,o){if(t&1&&(l(0,"p",19),a(1),r()),t&2){let i,n=C();s(),L("Welcome ",(i=n.registerForm.get("name"))==null?null:i.value," you are registered successfully")}}var fe=(()=>{let o=class o{constructor(){this._AuthService=q(W),this._FormBuilder=q(j),this._Router=q(G),this.msgError="",this.isLoading=!1,this.msgSuccess="",this.registerForm=this._FormBuilder.group({name:["",[f.required,f.minLength(3)]],email:[null,[f.required,f.email]],password:[null,[f.required,f.pattern(/^\w{6,}$/)]],rePassword:[null,[f.required]],phone:[null,[f.required,f.pattern(/^01[0125][0-9]{8}$/)]]},{validators:[this.confirmPassword]})}registerSubmit(){this.registerForm.valid?(this.isLoading=!0,this.registerSub=this._AuthService.setRegisterForm(this.registerForm.value).subscribe({next:n=>{console.log(n),n.message=="success"&&(this.msgSuccess=n.message,setTimeout(()=>{this._Router.navigate(["/login"])},1e3)),this.isLoading=!1},error:n=>{this.msgError=n.error.message,console.log(n),this.isLoading=!1}}),console.log(this.registerForm)):(this.registerForm.setErrors({mismatch:!0}),this.registerForm.markAllAsTouched())}ngOnDestroy(){this.registerSub?.unsubscribe()}confirmPassword(n){return n.get("password")?.value==n.get("rePassword")?.value?null:{mismatch:!0}}};o.\u0275fac=function(T){return new(T||o)},o.\u0275cmp=P({type:o,selectors:[["app-register"]],standalone:!0,features:[A],decls:34,vars:29,consts:[[1,"bg-main-light","shadow","p-2","my-5","rounded-4"],[1,"h2","text-main"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-50"],["for","email"],["type","text","id","email","formControlName","email",1,"form-control",3,"ngClass"],["for","phone"],["type","tel","id","phone","formControlName","phone",1,"form-control",3,"ngClass"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control",3,"ngClass"],["for","repassword"],["type","password","id","repassword","formControlName","rePassword",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-50","m-0"],["type","submit",1,"btn-main","ms-auto","d-block",3,"disabled"],[1,"m-0"],[1,"fas","fa-spin","fa-spinner"],[1,"alert","alert-success","w-50","m-0"]],template:function(T,e){if(T&1&&(l(0,"section",0)(1,"h1",1),a(2," Register Now:"),r(),l(3,"form",2),N("ngSubmit",function(){return e.registerSubmit()}),l(4,"div",3)(5,"label",4),a(6,"name:"),r(),F(7,"input",5),p(8,K,4,1,"div",6),r(),l(9,"div",3)(10,"label",7),a(11,"email:"),r(),F(12,"input",8),p(13,X,3,1,"div",6),r(),l(14,"div",3)(15,"label",9),a(16,"phone:"),r(),F(17,"input",10),p(18,ee,3,1,"div",6),r(),l(19,"div",3)(20,"label",11),a(21,"password:"),r(),F(22,"input",12),p(23,ie,3,1,"div",6),r(),l(24,"div",3)(25,"label",13),a(26,"rePassword:"),r(),F(27,"input",14),p(28,ne,2,0,"p",15),r(),l(29,"button",16),a(30,"Register "),p(31,le,2,0,"span"),r(),p(32,oe,2,1,"p",15)(33,se,2,1),r()()),T&2){let m,v,u,E,d,w,g,S,c,y;s(3),h("formGroup",e.registerForm),s(4),h("ngClass",b(14,R,!((m=e.registerForm.get("name"))!=null&&m.errors)&&(((m=e.registerForm.get("name"))==null?null:m.touched)||((m=e.registerForm.get("name"))==null?null:m.dirty)),((m=e.registerForm.get("name"))==null?null:m.errors)&&(((m=e.registerForm.get("name"))==null?null:m.touched)||((m=e.registerForm.get("name"))==null?null:m.dirty)))),s(),_(8,(v=e.registerForm.get("name"))!=null&&v.errors&&((v=e.registerForm.get("name"))!=null&&v.touched||(v=e.registerForm.get("name"))!=null&&v.dirty)?8:-1),s(4),h("ngClass",b(17,R,!((u=e.registerForm.get("email"))!=null&&u.errors)&&(((u=e.registerForm.get("email"))==null?null:u.touched)||((u=e.registerForm.get("email"))==null?null:u.dirty)),((u=e.registerForm.get("email"))==null?null:u.errors)&&(((u=e.registerForm.get("email"))==null?null:u.touched)||((u=e.registerForm.get("email"))==null?null:u.dirty)))),s(),_(13,(E=e.registerForm.get("email"))!=null&&E.errors&&((E=e.registerForm.get("email"))!=null&&E.touched||(E=e.registerForm.get("email"))!=null&&E.dirty)?13:-1),s(4),h("ngClass",b(20,R,!((d=e.registerForm.get("phone"))!=null&&d.errors)&&(((d=e.registerForm.get("phone"))==null?null:d.touched)||((d=e.registerForm.get("phone"))==null?null:d.dirty)),((d=e.registerForm.get("phone"))==null?null:d.errors)&&(((d=e.registerForm.get("phone"))==null?null:d.touched)||((d=e.registerForm.get("phone"))==null?null:d.dirty)))),s(),_(18,(w=e.registerForm.get("phone"))!=null&&w.errors&&((w=e.registerForm.get("phone"))!=null&&w.touched||(w=e.registerForm.get("phone"))!=null&&w.dirty)?18:-1),s(4),h("ngClass",b(23,R,!((g=e.registerForm.get("password"))!=null&&g.errors)&&(((g=e.registerForm.get("password"))==null?null:g.touched)||((g=e.registerForm.get("password"))==null?null:g.dirty)),((g=e.registerForm.get("password"))==null?null:g.errors)&&(((g=e.registerForm.get("password"))==null?null:g.touched)||((g=e.registerForm.get("password"))==null?null:g.dirty)))),s(),_(23,(S=e.registerForm.get("password"))!=null&&S.errors&&((S=e.registerForm.get("password"))!=null&&S.touched||(S=e.registerForm.get("password"))!=null&&S.dirty)?23:-1),s(4),h("ngClass",b(26,R,!e.registerForm.getError("mismatch")&&(((c=e.registerForm.get("rePassword"))==null?null:c.touched)||((c=e.registerForm.get("rePassword"))==null?null:c.dirty)),(e.registerForm.getError("mismatch")||((c=e.registerForm.get("rePassword"))==null?null:c.getError("required")))&&(((c=e.registerForm.get("rePassword"))==null?null:c.touched)||((c=e.registerForm.get("rePassword"))==null?null:c.dirty)))),s(),_(28,(e.registerForm.getError("mismatch")||(y=e.registerForm.get("rePassword"))!=null&&y.getError("required"))&&((y=e.registerForm.get("rePassword"))!=null&&y.touched||(y=e.registerForm.get("rePassword"))!=null&&y.dirty)?28:-1),s(),h("disabled",e.registerForm.invalid||e.isLoading),s(2),_(31,e.isLoading?31:-1),s(),_(32,e.msgError?32:e.msgSuccess?33:-1)}},dependencies:[O,k,V,B,M,I,$,D]});let t=o;return t})();export{fe as RegisterComponent};
