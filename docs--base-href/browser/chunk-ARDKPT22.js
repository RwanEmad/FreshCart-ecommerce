import{a as O}from"./chunk-QVMMG2FA.js";import{a as j}from"./chunk-J4B6JCZW.js";import{a as U}from"./chunk-DI2MNGMA.js";import"./chunk-WXI33M2S.js";import{j as D}from"./chunk-3RAAWP2B.js";import{a as G}from"./chunk-ZZTK2A7G.js";import{a as M}from"./chunk-56BKJWAR.js";import"./chunk-SLOTEUL6.js";import{c as E,f as N,h as B,j as $,y as V}from"./chunk-G7LECXLU.js";import{Ab as p,Hb as l,Ib as v,Na as W,Pb as k,Qb as A,Ra as o,Rb as b,Sb as P,Vb as h,Wb as w,Xb as L,aa as m,da as F,gb as y,ib as d,mb as T,na as f,nb as x,oa as _,ob as g,pb as S,qb as n,rb as c,sb as u,vb as I,zb as C}from"./chunk-A5RDGCAA.js";var z=t=>["/details",t],R=()=>[1,2,3,4,5],q=(t,s)=>[t,s],H=t=>({background:t,color:"transparent","background-clip":"text"});function J(t,s){t&1&&(n(0,"span"),u(1,"i",15),c())}function K(t,s){if(t&1&&(n(0,"span",10),u(1,"i",16),c()),t&2){let r=p().$implicit,e=p();d("ngStyle",b(1,H,e.generateGradient(r.ratingsAverage%1*100)))}}function Q(t,s){if(t&1){let r=I();n(0,"div",3)(1,"div",4)(2,"div",5),u(3,"img",6),n(4,"h3",7),l(5),c(),n(6,"h4",8),l(7),h(8,"termText"),h(9,"uppercase"),c(),n(10,"div",9)(11,"span"),l(12),h(13,"currency"),c(),n(14,"div"),g(15,J,2,0,"span",null,x),y(17,K,2,3,"span",10),n(18,"span",11),l(19),c()()()(),n(20,"button",12),C("click",function(){let i=f(r).$implicit,a=p();return _(a.addCart(i.id))}),l(21,"Add to Cart"),c(),n(22,"span",13),C("click",function(){let i=f(r).$implicit,a=p();return _(a.toggleWishList(i))}),u(23,"i",14),c()()()}if(t&2){let r=s.$implicit,e=p();o(2),d("routerLink",b(17,z,r.id)),o(),d("src",r.imageCover,W)("alt",r.title),o(2),v(r.category.name),o(2),v(w(9,12,L(8,9,r.title,2))),o(5),v(L(13,14,r.price,"GBP")),o(3),S(A(19,R).slice(0,r.ratingsAverage)),o(2),T(17,r.ratingsAverage%1!=0?17:-1),o(2),v(r.ratingsAverage),o(4),d("ngClass",P(20,q,e.isInWishList(r,e.favourites)?"fa-solid":"fa-regular",e.isInWishList(r,e.favourites)?"text-danger":""))}}var me=(()=>{let s=class s{constructor(){this._ToastrService=m(j),this._NgxSpinnerService=m(U),this._WishListService=m(G),this._CartService=m(M),this.favourites=[]}ngOnInit(){this._NgxSpinnerService.show(),this.getAllFavouritsSub=this._WishListService.getAllWidhList().subscribe({next:e=>{this.favourites=e.data}})}ngOnDestroy(){this.getAllFavouritsSub?.unsubscribe()}generateGradient(e){return`linear-gradient(90deg,  #ffc908 ${e}%, transparent ${e}%)`}addCart(e){this._CartService.addProductToCart(e).subscribe({next:i=>{this._ToastrService.success(i.message,"FreshCart"),this._CartService.cartNumber.next(i.numOfCartItems)}})}toggleWishList(e){this.isInWishList(e,this.favourites)?this._WishListService.removeItemFromWishList(e.id).subscribe({next:i=>{this.favourites=i.data,this.getAllFavouritsSub=this._WishListService.getAllWidhList().subscribe({next:a=>{this.favourites=a.data,this._WishListService.favNum.next(a.count)}})}}):this._WishListService.addToWishList(e.id).subscribe({next:i=>{this.favourites=i.data,this.getAllFavouritsSub=this._WishListService.getAllWidhList().subscribe({next:a=>{this.favourites=a.data,this._WishListService.favNum.next(a.count)}})}})}isInWishList(e,i){return this._WishListService.isInWishList(e,i)}};s.\u0275fac=function(i){return new(i||s)},s.\u0275cmp=F({type:s,selectors:[["app-favorites"]],standalone:!0,features:[k],decls:6,vars:0,consts:[[1,"mt-1","mb-4"],[1,""],[1,"row","g-3"],[1,"col-md-2"],[1,"product","p-2","position-relative"],[3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"small","text-main"],[1,"h6"],[1,"d-flex","justify-content-between","align-items-center"],[3,"ngStyle"],[1,"text-muted"],[1,"btn-main","w-100",3,"click"],[1,"position-absolute","top-0","end-0","p-2",3,"click"],[1,"fa-heart","fa-xl","cr",3,"ngClass"],[1,"fas","fa-star","rating-color"],[1,"fas","fa-star"]],template:function(i,a){i&1&&(n(0,"section",0)(1,"h2",1),l(2,"Pobular Products:"),c(),n(3,"div",2),g(4,Q,24,23,"div",3,x),c()()),i&2&&(o(4),S(a.favourites))},dependencies:[N,E,D,V,B,$,O]});let t=s;return t})();export{me as FavoritesComponent};
