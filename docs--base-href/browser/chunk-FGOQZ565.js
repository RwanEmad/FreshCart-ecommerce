import{b as B}from"./chunk-AKL7RE4X.js";import{a as N,b as f,c as q,d as k,f as A,g as D,h as R,i as G,k as V}from"./chunk-3RAAWP2B.js";import"./chunk-SLOTEUL6.js";import{c as b,x as T,y as x}from"./chunk-G7LECXLU.js";import{Ab as v,Hb as s,Jb as y,Pb as L,Ra as m,Sb as S,aa as h,da as E,gb as d,ib as _,mb as g,qb as l,rb as i,sb as C,zb as w}from"./chunk-A5RDGCAA.js";var M=(e,n)=>({"is-invalid":e,"is-valid":n});function P(e,n){e&1&&(l(0,"p",13),s(1,"Email required"),i())}function j(e,n){e&1&&(l(0,"p",13),s(1,"Enter Valid Email ."),i())}function I(e,n){if(e&1&&(l(0,"div",6),d(1,P,2,0,"p",13)(2,j,2,0),i()),e&2){let u,o=v();m(),g(1,(u=o.loginForm.get("email"))!=null&&u.getError("required")?1:(u=o.loginForm.get("email"))!=null&&u.getError("email")?2:-1)}}function U(e,n){e&1&&(l(0,"p",13),s(1,"Password required"),i())}function W(e,n){e&1&&(l(0,"p",13),s(1,"must be at least 6 chars ."),i())}function $(e,n){if(e&1&&(l(0,"div",6),d(1,U,2,0,"p",13)(2,W,2,0),i()),e&2){let u,o=v();m(),g(1,(u=o.loginForm.get("password"))!=null&&u.getError("required")?1:(u=o.loginForm.get("password"))!=null&&u.getError("pattern")?2:-1)}}function z(e,n){e&1&&(l(0,"span"),C(1,"i",14),i())}function H(e,n){e&1&&(l(0,"p",12),s(1,"account not found"),i())}function J(e,n){if(e&1&&(l(0,"p",15),s(1),i()),e&2){let u=v();m(),y("Welcome ",u.name," you are Logedin successfully")}}var ie=(()=>{let n=class n{constructor(){this._FormBuilder=h(G),this._AuthService=h(B),this._Router=h(T),this.msgError="",this.isLoading=!1,this.msgSuccess="",this.name="",this.loginForm=this._FormBuilder.group({email:[null,[f.required,f.email]],password:[null,[f.required,f.pattern(/^\w{6,}$/)]]})}loginSubmit(){console.log(this.loginForm),this.loginForm.valid&&(this._AuthService.setLoginForm(this.loginForm.value).subscribe({next:o=>{console.log(o.user.name),o.message=="success"&&(this.msgSuccess=o.message,this.name=o.user.name,setTimeout(()=>{localStorage.setItem("userToken",o.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},1e3)),this.isLoading=!1},error:o=>{this.msgError=o.error.message,console.log(o),this.isLoading=!1}}),this.isLoading=!0)}};n.\u0275fac=function(F){return new(F||n)},n.\u0275cmp=E({type:n,selectors:[["app-login"]],standalone:!0,features:[L],decls:22,vars:14,consts:[[1,"bg-main-light","shadow","p-2","my-5","rounded-4"],[1,"h2","text-main"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["type","email","name","email","formControlName","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-50"],["for","password"],["type","password","name","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"d-flex","align-items-center","justify-content-end","gap-4"],["routerLink","/forgot",1,"link-primary"],["type","submit",1,"btn-main",3,"disabled"],[1,"alert","alert-danger","w-50","m-0"],[1,"m-0"],[1,"fas","fa-spin","fa-spinner"],[1,"alert","alert-success","w-50","m-0"]],template:function(F,t){if(F&1&&(l(0,"section",0)(1,"h1",1),s(2,"Login :"),i(),l(3,"form",2),w("ngSubmit",function(){return t.loginSubmit()}),l(4,"div",3)(5,"label",4),s(6,"email"),i(),C(7,"input",5),d(8,I,3,1,"div",6),i(),l(9,"div",3)(10,"label",7),s(11,"Password"),i(),C(12,"input",8),d(13,$,3,1,"div",6),i(),l(14,"div",9)(15,"a",10),s(16,"ForgotPassword"),i(),l(17,"button",11),s(18,"Login "),d(19,z,2,0,"span"),i()(),d(20,H,2,0,"p",12)(21,J,2,1),i()()),F&2){let r,p,a,c;m(3),_("formGroup",t.loginForm),m(4),_("ngClass",S(8,M,((r=t.loginForm.get("email"))==null?null:r.errors)&&(((r=t.loginForm.get("email"))==null?null:r.touched)||((r=t.loginForm.get("email"))==null?null:r.dirty)),!((r=t.loginForm.get("email"))!=null&&r.errors)&&(((r=t.loginForm.get("email"))==null?null:r.touched)||((r=t.loginForm.get("email"))==null?null:r.dirty)))),m(),g(8,(p=t.loginForm.get("email"))!=null&&p.errors&&((p=t.loginForm.get("email"))!=null&&p.touched||(p=t.loginForm.get("email"))!=null&&p.dirty)?8:-1),m(4),_("ngClass",S(11,M,((a=t.loginForm.get("password"))==null?null:a.errors)&&(((a=t.loginForm.get("password"))==null?null:a.touched)||((a=t.loginForm.get("password"))==null?null:a.dirty)),!((a=t.loginForm.get("password"))!=null&&a.errors)&&(((a=t.loginForm.get("password"))==null?null:a.touched)||((a=t.loginForm.get("password"))==null?null:a.dirty)))),m(),g(13,(c=t.loginForm.get("password"))!=null&&c.errors&&((c=t.loginForm.get("password"))!=null&&c.touched||(c=t.loginForm.get("password"))!=null&&c.dirty)?13:-1),m(4),_("disabled",t.loginForm.invalid||t.isLoading),m(2),g(19,t.isLoading?19:-1),m(),g(20,t.msgError?20:t.msgSuccess?21:-1)}},dependencies:[V,A,N,q,k,D,R,b,x]});let e=n;return e})();export{ie as LoginComponent};
