import './polyfills.server.mjs';
import{a as j}from"./chunk-EI22NSHM.mjs";import{a as M}from"./chunk-K5AQNT7I.mjs";import{a as O}from"./chunk-5WTYMTRG.mjs";import{a as D}from"./chunk-HD4HDBIW.mjs";import{a as U}from"./chunk-7PO7FDVW.mjs";import"./chunk-GTSSCL6B.mjs";import{j as G}from"./chunk-CB2QLT2S.mjs";import"./chunk-ZY3Z4VSQ.mjs";import{K as V,f as E,i as N,k as B,m as $}from"./chunk-RXAJKQTO.mjs";import{Gb as l,Hb as v,Ma as W,Ob as k,Pb as A,Qa as o,Qb as b,Rb as P,Ub as h,Vb as w,Wb as L,Y as m,aa as F,fb as y,hb as d,ka as f,la as _,lb as T,mb as x,nb as g,ob as S,pb as n,qb as c,rb as u,ub as I,yb as C,zb as p}from"./chunk-XCB6WECV.mjs";import"./chunk-VVCT4QZE.mjs";var z=t=>["/details",t],R=()=>[1,2,3,4,5],q=(t,s)=>[t,s],H=t=>({background:t,color:"transparent","background-clip":"text"});function J(t,s){t&1&&(n(0,"span"),u(1,"i",15),c())}function K(t,s){if(t&1&&(n(0,"span",10),u(1,"i",16),c()),t&2){let r=p().$implicit,e=p();d("ngStyle",b(1,H,e.generateGradient(r.ratingsAverage%1*100)))}}function Q(t,s){if(t&1){let r=I();n(0,"div",3)(1,"div",4)(2,"div",5),u(3,"img",6),n(4,"h3",7),l(5),c(),n(6,"h4",8),l(7),h(8,"termText"),h(9,"uppercase"),c(),n(10,"div",9)(11,"span"),l(12),h(13,"currency"),c(),n(14,"div"),g(15,J,2,0,"span",null,x),y(17,K,2,3,"span",10),n(18,"span",11),l(19),c()()()(),n(20,"button",12),C("click",function(){let i=f(r).$implicit,a=p();return _(a.addCart(i.id))}),l(21,"Add to Cart"),c(),n(22,"span",13),C("click",function(){let i=f(r).$implicit,a=p();return _(a.toggleWishList(i))}),u(23,"i",14),c()()()}if(t&2){let r=s.$implicit,e=p();o(2),d("routerLink",b(17,z,r.id)),o(),d("src",r.imageCover,W)("alt",r.title),o(2),v(r.category.name),o(2),v(w(9,12,L(8,9,r.title,2))),o(5),v(L(13,14,r.price,"GBP")),o(3),S(A(19,R).slice(0,r.ratingsAverage)),o(2),T(17,r.ratingsAverage%1!=0?17:-1),o(2),v(r.ratingsAverage),o(4),d("ngClass",P(20,q,e.isInWishList(r,e.favourites)?"fa-solid":"fa-regular",e.isInWishList(r,e.favourites)?"text-danger":""))}}var me=(()=>{let s=class s{constructor(){this._ToastrService=m(U),this._NgxSpinnerService=m(D),this._WishListService=m(M),this._CartService=m(O),this.favourites=[]}ngOnInit(){this._NgxSpinnerService.show(),this.getAllFavouritsSub=this._WishListService.getAllWidhList().subscribe({next:e=>{this.favourites=e.data}})}ngOnDestroy(){this.getAllFavouritsSub?.unsubscribe()}generateGradient(e){return`linear-gradient(90deg,  #ffc908 ${e}%, transparent ${e}%)`}addCart(e){this._CartService.addProductToCart(e).subscribe({next:i=>{this._ToastrService.success(i.message,"FreshCart"),this._CartService.cartNumber.next(i.numOfCartItems)}})}toggleWishList(e){this.isInWishList(e,this.favourites)?this._WishListService.removeItemFromWishList(e.id).subscribe({next:i=>{this.favourites=i.data,this.getAllFavouritsSub=this._WishListService.getAllWidhList().subscribe({next:a=>{this.favourites=a.data,this._WishListService.favNum.next(a.count)}})}}):this._WishListService.addToWishList(e.id).subscribe({next:i=>{this.favourites=i.data,this.getAllFavouritsSub=this._WishListService.getAllWidhList().subscribe({next:a=>{this.favourites=a.data,this._WishListService.favNum.next(a.count)}})}})}isInWishList(e,i){return this._WishListService.isInWishList(e,i)}};s.\u0275fac=function(i){return new(i||s)},s.\u0275cmp=F({type:s,selectors:[["app-favorites"]],standalone:!0,features:[k],decls:6,vars:0,consts:[[1,"mt-1","mb-4"],[1,""],[1,"row","g-3"],[1,"col-md-2"],[1,"product","p-2","position-relative"],[3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"small","text-main"],[1,"h6"],[1,"d-flex","justify-content-between","align-items-center"],[3,"ngStyle"],[1,"text-muted"],[1,"btn-main","w-100",3,"click"],[1,"position-absolute","top-0","end-0","p-2",3,"click"],[1,"fa-heart","fa-xl","cr",3,"ngClass"],[1,"fas","fa-star","rating-color"],[1,"fas","fa-star"]],template:function(i,a){i&1&&(n(0,"section",0)(1,"h2",1),l(2,"Pobular Products:"),c(),n(3,"div",2),g(4,Q,24,23,"div",3,x),c()()),i&2&&(o(4),S(a.favourites))},dependencies:[N,E,G,V,B,$,j]});let t=s;return t})();export{me as FavoritesComponent};
