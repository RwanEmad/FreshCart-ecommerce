import './polyfills.server.mjs';
import{a as V}from"./chunk-LGPYB4HE.mjs";import{a as D}from"./chunk-K5AQNT7I.mjs";import{a as N}from"./chunk-5WTYMTRG.mjs";import{a as G}from"./chunk-7PO7FDVW.mjs";import"./chunk-GTSSCL6B.mjs";import"./chunk-ZY3Z4VSQ.mjs";import{G as k,f as T,i as w}from"./chunk-RXAJKQTO.mjs";import{Gb as l,Hb as h,Ib as A,Ma as b,Ob as y,Pb as I,Qa as o,Qb as E,Rb as F,Y as d,aa as S,fb as _,hb as p,ka as v,la as f,lb as g,mb as C,nb as P,ob as L,pb as n,qb as r,rb as u,ub as W,yb as x,zb as m}from"./chunk-XCB6WECV.mjs";import"./chunk-VVCT4QZE.mjs";var M=(s,a)=>[s,a],O=()=>[1,2,3,4,5],R=s=>({background:s,color:"transparent","background-clip":"text"});function j(s,a){s&1&&(n(0,"span"),u(1,"i",14),r())}function $(s,a){if(s&1&&(n(0,"span",12),u(1,"i",15),r()),s&2){let t=m(2);p("ngStyle",E(1,R,t.generateGradient(t.detailsProduct.ratingsAverage%1*100)))}}function z(s,a){if(s&1){let t=W();n(0,"section")(1,"h1",0),l(2,"Details Product"),r(),n(3,"div",1)(4,"div",2)(5,"div"),u(6,"img",3),r()(),n(7,"div",4)(8,"div",5)(9,"span",6),x("click",function(){v(t);let e=m();return f(e.toggleWishList(e.detailsProduct))}),u(10,"i",7),r(),n(11,"h2",8),l(12),r(),n(13,"p",9),l(14),r(),n(15,"h3",10),l(16),r(),n(17,"div",11)(18,"span"),l(19),r(),n(20,"div"),P(21,j,2,0,"span",null,C),_(23,$,2,3,"span",12),n(24,"span",9),l(25),r()()(),n(26,"button",13),x("click",function(){v(t);let e=m();return f(e.addCart(e.detailsProduct.id))}),l(27,"Add to Cart"),r()()()()()}if(s&2){let t=m();o(6),p("src",t.detailsProduct.imageCover,b)("alt",t.detailsProduct.title),o(4),p("ngClass",F(9,M,t.isInWishList(t.detailsProduct,t.favourites)?"fa-solid":"fa-regular",t.isInWishList(t.detailsProduct,t.favourites)?"text-danger":"")),o(2),h(t.detailsProduct.title),o(2),h(t.detailsProduct.description),o(2),h(t.detailsProduct.category.name),o(3),A("",t.detailsProduct.price,"EGP"),o(2),L(I(12,O).slice(0,t.detailsProduct.ratingsAverage)),o(2),g(23,t.detailsProduct.ratingsAverage%1!=0?23:-1),o(2),h(t.detailsProduct.ratingsAverage)}}var Z=(()=>{let a=class a{constructor(){this._ProductsService=d(V),this._ActivatedRoute=d(k),this._WishListService=d(D),this._CartService=d(N),this._ToastrService=d(G),this.detailsProduct=null,this.favourites=[]}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:i=>{let e=i.get("id");this.getSepecificProSub=this._ProductsService.getSpecificProduct(e).subscribe({next:c=>{this.detailsProduct=c.data}})}}),this.getAllFavouritsSub=this._WishListService.getAllWidhList().subscribe({next:i=>{this.favourites=i.data}}),this.isInWishList(this.detailsProduct,this.favourites)}ngOnDestroy(){this.getSepecificProSub?.unsubscribe(),this.getAllFavouritsSub?.unsubscribe(),this.getCarteAddsub?.unsubscribe()}addCart(i){this._CartService.addProductToCart(i).subscribe({next:e=>{this._ToastrService.success(e.message,"FreshCart"),this._CartService.cartNumber.next(e.numOfCartItems)}})}toggleWishList(i){this.isInWishList(i,this.favourites)?this._WishListService.removeItemFromWishList(i.id).subscribe({next:e=>{this.favourites=e.data,this.getAllFavouritsSub=this._WishListService.getAllWidhList().subscribe({next:c=>{this.favourites=c.data,this._WishListService.favNum.next(c.count)}})}}):this._WishListService.addToWishList(i.id).subscribe({next:e=>{this.favourites=e.data,this.getAllFavouritsSub=this._WishListService.getAllWidhList().subscribe({next:c=>{this.favourites=c.data,this._WishListService.favNum.next(c.count)}})}})}isInWishList(i,e){return this._WishListService.isInWishList(i,e)}generateGradient(i){return`linear-gradient(90deg,  #ffc908 ${i}%, transparent ${i}%)`}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=S({type:a,selectors:[["app-details"]],standalone:!0,features:[y],decls:1,vars:1,consts:[[1,"text-center","text-main","my-2"],[1,"row","align-items-center"],[1,"col-md-3"],[1,"w-100",3,"src","alt"],[1,"col-md-9"],[1,"position-relative"],[1,"position-absolute","top-0","end-0","p-2",3,"click"],[1,"fa-heart","fa-xl","cr",3,"ngClass"],[1,"text-main","my-2"],[1,"text-muted"],[1,"h6"],[1,"d-flex","justify-content-between","align-items-center"],[3,"ngStyle"],[1,"btn-main","w-100",3,"click"],[1,"fas","fa-star","rating-color"],[1,"fas","fa-star"]],template:function(e,c){e&1&&_(0,z,28,13,"section"),e&2&&g(0,c.detailsProduct?0:-1)},dependencies:[w,T]});let s=a;return s})();export{Z as DetailsComponent};
