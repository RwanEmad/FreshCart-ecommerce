import './polyfills.server.mjs';
import{b as B}from"./chunk-GQ6V2TVB.mjs";import{a as T,b as C,c as V,d as q,f as N,g as G,h as A,i as L,k as R}from"./chunk-CB2QLT2S.mjs";import"./chunk-ZY3Z4VSQ.mjs";import{J as F,f as b}from"./chunk-RXAJKQTO.mjs";import{Gb as d,Ob as P,Qa as s,Rb as f,Y as w,aa as S,fb as m,hb as p,ka as v,la as y,lb as u,pb as l,qb as o,rb as g,ub as x,yb as E,zb as _}from"./chunk-XCB6WECV.mjs";import"./chunk-VVCT4QZE.mjs";var h=(n,r)=>({"is-invalid":n,"is-valid":r});function D(n,r){n&1&&(l(0,"p",8),d(1,"Email required"),o())}function M(n,r){n&1&&(l(0,"p",8),d(1,"Enter Valid Email ."),o())}function k(n,r){if(n&1&&(l(0,"div",6),m(1,D,2,0,"p",8)(2,M,2,0),o()),n&2){let e,i=_(2);s(),u(1,(e=i.verifyEmail.get("email"))!=null&&e.getError("required")?1:(e=i.verifyEmail.get("email"))!=null&&e.getError("email")?2:-1)}}function $(n,r){n&1&&(l(0,"span"),g(1,"i",9),o())}function j(n,r){if(n&1){let e=x();l(0,"form",2),E("ngSubmit",function(){v(e);let t=_();return y(t.verifyEmailSubmit())}),l(1,"div",3)(2,"label",4),d(3,"email"),o(),g(4,"input",5),m(5,k,3,1,"div",6),o(),l(6,"button",7),d(7,"Verify Email "),m(8,$,2,0,"span"),o()()}if(n&2){let e,i,t=_();p("formGroup",t.verifyEmail),s(4),p("ngClass",f(5,h,((e=t.verifyEmail.get("email"))==null?null:e.errors)&&(((e=t.verifyEmail.get("email"))==null?null:e.touched)||((e=t.verifyEmail.get("email"))==null?null:e.dirty)),!((e=t.verifyEmail.get("email"))!=null&&e.errors)&&(((e=t.verifyEmail.get("email"))==null?null:e.touched)||((e=t.verifyEmail.get("email"))==null?null:e.dirty)))),s(),u(5,(i=t.verifyEmail.get("email"))!=null&&i.errors&&((i=t.verifyEmail.get("email"))!=null&&i.touched||(i=t.verifyEmail.get("email"))!=null&&i.dirty)?5:-1),s(),p("disabled",t.verifyEmail.invalid||t.isLoading),s(2),u(8,t.isLoading?8:-1)}}function I(n,r){n&1&&(l(0,"p",8),d(1,"code required"),o())}function U(n,r){n&1&&(l(0,"p",8),d(1,"Enter Valid Code ."),o())}function z(n,r){if(n&1&&(l(0,"div",6),m(1,I,2,0,"p",8)(2,U,2,0),o()),n&2){let e,i=_(2);s(),u(1,(e=i.verifyCode.get("resetCode"))!=null&&e.getError("required")?1:(e=i.verifyCode.get("resetCode"))!=null&&e.getError("pattern")?2:-1)}}function H(n,r){n&1&&(l(0,"span"),g(1,"i",9),o())}function J(n,r){if(n&1){let e=x();l(0,"form",10),E("ngSubmit",function(){v(e);let t=_();return y(t.verifyCodeSubmit())}),l(1,"div",3)(2,"label",11),d(3,"Reset Code"),o(),g(4,"input",12),m(5,z,3,1,"div",6),o(),l(6,"button",7),d(7,"Verify Code "),m(8,H,2,0,"span"),o()()}if(n&2){let e,i,t=_();p("formGroup",t.verifyCode),s(4),p("ngClass",f(5,h,((e=t.verifyCode.get("resetCode"))==null?null:e.errors)&&(((e=t.verifyCode.get("resetCode"))==null?null:e.touched)||((e=t.verifyCode.get("resetCode"))==null?null:e.dirty)),!((e=t.verifyCode.get("resetCode"))!=null&&e.errors)&&(((e=t.verifyCode.get("resetCode"))==null?null:e.touched)||((e=t.verifyCode.get("resetCode"))==null?null:e.dirty)))),s(),u(5,(i=t.verifyCode.get("resetCode"))!=null&&i.errors&&((i=t.verifyCode.get("resetCode"))!=null&&i.touched||(i=t.verifyCode.get("resetCode"))!=null&&i.dirty)?5:-1),s(),p("disabled",t.verifyCode.invalid||t.isLoading),s(2),u(8,t.isLoading?8:-1)}}function K(n,r){n&1&&(l(0,"p",8),d(1,"Email required"),o())}function O(n,r){n&1&&(l(0,"p",8),d(1,"Enter Valid Email ."),o())}function Q(n,r){if(n&1&&(l(0,"div",6),m(1,K,2,0,"p",8)(2,O,2,0),o()),n&2){let e,i=_(2);s(),u(1,(e=i.resetPassword.get("email"))!=null&&e.getError("required")?1:(e=i.resetPassword.get("email"))!=null&&e.getError("email")?2:-1)}}function W(n,r){n&1&&(l(0,"p",8),d(1,"Password required"),o())}function X(n,r){n&1&&(l(0,"p",8),d(1,"must be at least 6 chars ."),o())}function Y(n,r){if(n&1&&(l(0,"div",6),m(1,W,2,0,"p",8)(2,X,2,0),o()),n&2){let e,i=_(2);s(),u(1,(e=i.resetPassword.get("newPassword"))!=null&&e.getError("required")?1:(e=i.resetPassword.get("newPassword"))!=null&&e.getError("pattern")?2:-1)}}function Z(n,r){n&1&&(l(0,"span"),g(1,"i",9),o())}function ee(n,r){if(n&1){let e=x();l(0,"form",2),E("ngSubmit",function(){v(e);let t=_();return y(t.resetPasswordSubmit())}),l(1,"div",3)(2,"label",4),d(3,"email"),o(),g(4,"input",13),m(5,Q,3,1,"div",6),o(),l(6,"div",3)(7,"label",14),d(8,"New Password"),o(),g(9,"input",15),m(10,Y,3,1,"div",6),o(),l(11,"button",7),d(12,"reset password "),m(13,Z,2,0,"span"),o()()}if(n&2){let e,i,t,c,a=_();p("formGroup",a.resetPassword),s(4),p("ngClass",f(7,h,((e=a.resetPassword.get("email"))==null?null:e.errors)&&(((e=a.resetPassword.get("email"))==null?null:e.touched)||((e=a.resetPassword.get("email"))==null?null:e.dirty)),!((e=a.resetPassword.get("email"))!=null&&e.errors)&&(((e=a.resetPassword.get("email"))==null?null:e.touched)||((e=a.resetPassword.get("email"))==null?null:e.dirty)))),s(),u(5,(i=a.resetPassword.get("email"))!=null&&i.errors&&((i=a.resetPassword.get("email"))!=null&&i.touched||(i=a.resetPassword.get("email"))!=null&&i.dirty)?5:-1),s(4),p("ngClass",f(10,h,((t=a.resetPassword.get("newPassword"))==null?null:t.errors)&&(((t=a.resetPassword.get("newPassword"))==null?null:t.touched)||((t=a.resetPassword.get("newPassword"))==null?null:t.dirty)),!((t=a.resetPassword.get("newPassword"))!=null&&t.errors)&&(((t=a.resetPassword.get("newPassword"))==null?null:t.touched)||((t=a.resetPassword.get("newPassword"))==null?null:t.dirty)))),s(),u(10,(c=a.resetPassword.get("newPassword"))!=null&&c.errors&&((c=a.resetPassword.get("newPassword"))!=null&&c.touched||(c=a.resetPassword.get("newPassword"))!=null&&c.dirty)?10:-1),s(),p("disabled",a.resetPassword.invalid||a.isLoading),s(2),u(13,a.isLoading?13:-1)}}var de=(()=>{let r=class r{constructor(){this._FormBuilder=w(L),this._AuthService=w(B),this._Router=w(F),this.isLoading=!1,this.step=1,this.verifyEmail=this._FormBuilder.group({email:[null,[C.required,C.email]]}),this.verifyCode=this._FormBuilder.group({resetCode:[null,[C.required,C.pattern(/^[0-9]{6}$/)]]}),this.resetPassword=this._FormBuilder.group({email:[null,[C.required,C.email]],newPassword:[null,[C.required,C.pattern(/^\w{6,}$/)]]})}verifyEmailSubmit(){let i=this.verifyEmail.get("email")?.value;this.resetPassword.get("email")?.patchValue(i),this._AuthService.setEmailVerify(this.verifyEmail.value).subscribe({next:t=>{console.log(t),t.statusMsg=="success"&&(this.step=2)},error:t=>{console.log(t)}})}verifyCodeSubmit(){this._AuthService.setCodeVerify(this.verifyCode.value).subscribe({next:i=>{console.log(i),i.status=="Success"&&(this.step=3)},error:i=>{console.log(i)}})}resetPasswordSubmit(){this._AuthService.setResetPasword(this.resetPassword.value).subscribe({next:i=>{console.log(i),localStorage.setItem("userToken",i.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},error:i=>{console.log(i)}})}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=S({type:r,selectors:[["app-forgotpassword"]],standalone:!0,features:[P],decls:6,vars:1,consts:[[1,"text-center","text-main","my-2"],[1,"bg-main-light","rounded-4","shadow","p-3",3,"formGroup"],[1,"bg-main-light","rounded-4","shadow","p-3",3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["type","email","name","email","formControlName","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-50"],["type","submit",1,"btn-main","ms-auto","d-block",3,"disabled"],[1,"m-0"],[1,"fas","fa-spin","fa-spinner"],[1,"bg-main-light","rounded-4","shadow","p-3","my-5",3,"ngSubmit","formGroup"],["for","code"],["type","text","name","resetCode","formControlName","resetCode",1,"form-control",3,"ngClass"],["readonly","","type","email","name","email","formControlName","email",1,"form-control",3,"ngClass"],["for","newPassword"],["type","password","name","password","formControlName","newPassword",1,"form-control",3,"ngClass"]],template:function(t,c){t&1&&(l(0,"section")(1,"h1",0),d(2,"Forgot Password"),o(),m(3,j,9,8,"form",1)(4,J,9,8)(5,ee,14,13),o()),t&2&&(s(3),u(3,c.step==1?3:c.step==2?4:c.step==3?5:-1))},dependencies:[R,N,T,V,q,G,A,b]});let n=r;return n})();export{de as ForgotpasswordComponent};
